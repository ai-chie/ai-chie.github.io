{%- comment -%}
Open Graph および Twitter Card メタ情報（SNS共有向け）
- page.title / description / image / url / lang を元に構成
- Twitter:summary_large_image 形式
- meta_config.yml に基づく og:locale や twitter:site を含む
{%- endcomment -%}

{%- assign meta_cfg = site.data.meta_config | default: {} -%}
{%- assign defaults = meta_cfg.defaults | default: {} -%}
{%- assign og_cfg = meta_cfg.open_graph | default: {} -%}
{%- assign twitter_cfg = meta_cfg.twitter | default: {} -%}

{%- assign page_title = page.title | default: site.title -%}
{%- assign page_description = page.description | default: defaults.description | default: site.description -%}
{%- assign page_image = page.image | default: defaults.image | default: site.image -%}
{%- assign page_url = page.url | absolute_url -%}
{%- assign page_lang = page.lang | default: defaults.lang | default: "ja" -%}
{%- assign og_locale = og_cfg.locale_map[page_lang] | default: "ja_JP" -%}
{%- assign twitter_user = twitter_cfg.username | default: null -%}

<!-- Open Graph -->
<meta property="og:type" content="article" />
<meta property="og:title" content="{{ page_title | escape }}" />
<meta property="og:description" content="{{ page_description | escape }}" />
<meta property="og:url" content="{{ page_url }}" />
<meta property="og:locale" content="{{ og_locale }}" />
{%- if page_image %}
<meta property="og:image" content="{{ page_image | absolute_url }}" />
{%- endif %}

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="{{ page_title | escape }}" />
<meta name="twitter:description" content="{{ page_description | escape }}" />
{%- if page_image %}
<meta name="twitter:image" content="{{ page_image | absolute_url }}" />
{%- endif %}
{%- if twitter_user %}
<meta name="twitter:site" content="{{ twitter_user }}">
{%- endif %}
