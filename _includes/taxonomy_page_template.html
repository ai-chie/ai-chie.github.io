{%- comment -%}
このファイルは、taxonomy-list.html と taxonomy-list-text.html の共通部分をまとめたものです。
タクソノミーデータの読み込み、共通変数の定義、UIの条件分岐、
そしてtaxonomy_list_generator.html の呼び出しを行います。

必要な引数:
- type: 'categories' または 'tags' (必須)
- lang: 現在の言語 (必須)
- render_type: 'html' または 'text' (オプション、デフォルトは 'html')
{%- endcomment -%}

{%- assign type = include.type -%}
{%- assign lang = include.lang | default: page.lang | default: 'ja' -%}
{%- assign ui = site.data.lang.taxonomy_ui -%}
{%- assign warnings_data = site.data.lang.taxonomy_warning -%}
{%- assign render_type = include.render_type | default: 'html' -%}

{# タイトル表示 #}
<h1>{{ ui.title[type][lang] }} {% if render_type == 'text' %}(Text Version){% endif %}</h1>

{%- if render_type == 'html' -%}
  {# HTML版にのみ表示されるUI要素 #}
  <div>
    <input type="text" id="filter" placeholder="{{ ui.search_placeholder[lang] }}">
    <select id="sort">
      <option value="count">{{ ui.sort_options.count[lang] }}</option>
      <option value="name">{{ ui.sort_options.name[lang] }}</option>
    </select>
  </div>
{%- endif -%}

<section>
  <h2>{{ ui.all_categories_or_tags[lang] }}</h2>
  {# 実際のタクソノミーリストの生成は taxonomy_list_generator.html に委ねる #}
  {% include taxonomy_list_generator.html
    type=type
    lang=lang
    ui=ui
    warnings_data=warnings_data
    base_path="/" | append: lang | append: "/" | append: type
    render_type=render_type
  %}
</section>
